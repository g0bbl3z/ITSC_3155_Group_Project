<!-- View Profiles -->
<br>
<div class="login-wrap">
 <div class="login-html">
     <div class="container bootstrap snippet">
         <div class="profilepic"><%= image_tag("profile.jpg", :height => 120, :width => 120, :alt => "Profile Picture") %></div>
    <% if current_user == @user %>
        <p class="usern"><%= @user.name %></p>
    <% else %>
        <p class="usern"><%= @user.name %></p>
    <% end %>
         
    <br>
    <div class="row">
        <div class="col-sm-10">
            <br>
            <% if current_user == @user %>
                <%= link_to 'Profile Settings', edit_user_path(@user) %>
                <br>
                <%= link_to 'Delete Account', user_path(@user), method: :delete, data: { confirm: 'Are you sure you would like to delete your account? Please note, this cannot be undone.' } %>
                <br><br>
            <% end %>
            
            
        </div>
        
        <table class="g-table">
            <thread>
                <tr>
                    <th>Gift Name</th>
                    <th>Description</th>
                </tr>
            </thread>
            
            <tbody>
                <% @user.gifts.each do |gift| %>
                    <% if @user == current_user or gift.giver_id == nil or gift.giver_id == current_user.id %>
                        <tr>
                            <td style="word-wrap"><%= gift.name %></td>
                            <td style="word-wrap"><%= gift.description %></td>
                            <% if current_user == @user %>
                                <td><%= link_to 'Edit Gift', edit_user_gift_path(user_id: gift.user_id, id: gift.id) %></td>
                            <% else %>
                                <td>
                                    <% if gift.giver_id == nil %>
                                        <%= link_to 'Promise Gift', promise_gifts_path(user_id: gift.user_id, id: gift.id), method: :post %>
                                    <% elsif gift.giver_id == current_user.id %>
                                        <%= link_to 'Remove Promise', unpromise_gifts_path(user_id: gift.user_id, id: gift.id), method: :post %>
                                    <% end %>
                                </td>
                            <% end %>
                        </tr>
                    <% end %>
                <% end %>
                <% if current_user == @user %>
                <%= form_for([@user, @user.gifts.build]) do |f| %>
                    <tr>
                        <td><%= f.text_field :name %></td>
                        <td><%= f.text_area :description %></td>
                        <!--<%= f.hidden_field :user_id, value: @user.id %>-->
                        <!--<%= f.hidden_field :giver_id, value: -1 %>-->
                        <td><%= f.submit %></td>
                    </tr>
                <% end %>
                <% end %>
            </tbody>
            
              </div> 
        </div>
    </div>
</div>
        
        
        
        